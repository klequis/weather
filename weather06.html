<!--
  > weather 06.html is derived from weather03.html
-->

<!DOCTYPE html>
<html>
<head>
	<!-- <script src="//code.jquery.com/jquery-2.1.1.min.js"></script> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<!--<link rel="stylesheet" type="text/css" href="style.css">-->
    <meta charset="utf-8">
    <title>Weather</title>
</head>
<body>
<a name="#ajax-getjson-example"></a>
<div id="example-section38">   
    <div>Football weather</div>
    <div id="div381"></div>
    <button id="btn382" type="button">Team location</button>
    <div id="output"></div>
</div>
</body>
</html>
<script>
  APPID="cd605b9a7b8b517b82492ee7bf47a295";
	function getWeather(url, callback) {
		$.ajax({
		  dataType: "jsonp",
		  url: url,
		  jsonCallback: 'jsonp',
		  //data: { lat: coords[0], lon: coords[1] },
		  cache: false,
		})		
		.done(function(json) {
			alert(".done");
			callback(json); 
		})
	  .fail(function(xhr, status, errorThrown) {
	    alert("Sorry, there was a problem!");
	    console.log("error: " + errorThrown);
	    console.log("status: " + status);
	    console.dir(xhr);
	  })
	  .always(function(xhr, status) {
	  	//alert("the request is complete!");
	  });
	}


		 
	$(document).ready(function () {
	  var output = 1;
	  var parsedData = {};

	  $("#btn382").click(function () {

	  	/*

		  url = 'http://api.openweathermap.org/data/2.5/forecast/city?id=5392593&APPID=cd605b9a7b8b517b82492ee7bf47a295';		  	  
	    getWeather(url, function(data) {

	      // Try to parse the data
		    writeMessage("Parsing data");
		    try {
		    	parsedData = JSON.parse(data);
		    } catch (e) {
		    	alert(e.message);
	    	}	    	
	    	writeMessage("data parsed");

	    	switch (output) {
	    		case 0:
	    			alert(JSON.stringify(data));
	   				$("#output").html("<pre><code>" + JSON.stringify(data, null, 2) + "</pre></code>" ); // replace text inside of div
	   				break;
	 				case 1:
	 					writeMessage("case 1");
	 					//alert(JSON.stringify(data.city));
	 					//alert("City = " + parsedData.city);
	 					alert("CityID = " + parsedData.city.id);
	 					break;
						default:
							alert("shouldn't be here");
	    	}	    	
	    });
	    */
		});
	});
	
	function writeMessage(message) {
		document.write("Message: " + message + "<br>");
	}
	function writeError(e) {
		document.write("Error: " + e.message + " on line " + e.linenumber + "<br>");
	}
</script>

<!--
USEFUL

getWeather(url, function(data) {
							var html = [];
							html.push('<div>')
			        html.push('City: ', team.Teams, ', ');
			        html.push('Lat: ', data.coord.lat, ', ');
			        html.push('Lon: ', data.coord.lon, ', ');
			        html.push('Weather: ', data.weather[0].description);
							html.push('</div>')
			        $("#div381").append(html.join('')).css("background-color", "orange");
			      });
	    		}(obj));
	    	}

	    });
-->