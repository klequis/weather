<!--
  > weather 06.html is derived from weather03.html
-->

<!DOCTYPE html>
<html>
<head>
	<!-- <script src="//code.jquery.com/jquery-2.1.1.min.js"></script> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	 <script src="moment.js"></script>
	<!--<link rel="stylesheet" type="text/css" href="style.css">-->
    <meta charset="utf-8">
    <title>Weather</title>
</head>
<body>
<a name="#ajax-getjson-example"></a>
<div id="example-section38">
    <div>Football weather</div>
		<input type="text" name="inputCity">
    <div id="div381"></div>
    <button id="btn382" type="button">Team location</button>
    <div id="output"></div>
</div>
</body>
</html>
<script>

	function getWeather(url, callback) {
		$.ajax({
		  dataType: "jsonp",
		  url: url,
		  jsonCallback: 'jsonp',
		  //data: { lat: coords[0], lon: coords[1] },
		  cache: false,
		})
		.done(function(json) {
			callback(json);
		})
	  .fail(function(xhr, status, errorThrown) {
	    alert("Sorry, there was a problem!");
	    console.log("error: " + errorThrown);
	    console.log("status: " + status);
	    console.dir(xhr);
	  })
	  .always(function(xhr, status) {
	  	//alert("the request is complete!");
	  });
	}

	function writeMessage(message) {
		document.write("Message: " + message + "<br>");
	}

/* comment for git practice */

	/*
		city.name
		list[0].dt
		main.temp
		main.temp_min
		main.temp_max
		main.pressure
		weather.description
	*/


	$(document).ready(function () {
	  //var output = 1;
	  //var parsedData = {};


	  $("#btn382").click(function () {
	  	//url = 'http://api.openweathermap.org/data/2.5/forecast/city?id=5392593&units=imperial&APPID=cd605b9a7b8b517b82492ee7bf47a295';
			url = 'http://api.openweathermap.org/data/2.5/weather?id=5392593&APPID=cd605b9a7b8b517b82492ee7bf47a295&units=fahrenheit';
										//http://json.parser.online.fr/
			// find city ex: api.openweathermap.org/data/2.5/weather?q={city name}
			inputCityURL = 'http://api.openweathermap.org/data/2.5/weather?APPID=cd605b9a7b8b517b82492ee7bf47a295&q={inputCity}';
			 http://api.openweathermap.org/data/2.5/find?q=San&nbsp;Ramon&type=like&APPID=cd605b9a7b8b517b82492ee7bf47a295
			  
			writeMessage("inputCityURL =" + inputCityURL)
	  	getWeather(url, function(data) {



				//city = data.city.name;
				city = data.name;
				writeMessage("City is: " + city);
				dateString = data.dt;
				writeMessage("dateString = " + dateString);
				var skies = data.weather[0].main;
				writeMessage("skies = " + skies);
				var skiesDesc = data.weather[0].description;
				writeMessage("skiesDesc = " + skiesDesc);
				var skiesIcon = data.weather[0].icon;
				writeMessage("skiesIcon = " + skiesIcon);
				var currTemp = data.main.temp;
				writeMessage("currentTemp = " + Math.round(currTemp));
				var pressure = data.main.pressure;
				writeMessage("pressure = " + pressure);
				var humidity = data.main.humidity;
				writeMessage("humidity = " + humidity);
				var minTemp = data.main.temp_min;
				writeMessage("minTemp = " + Math.round(minTemp));
				var maxTemp = data.main.temp_max;
				writeMessage("maxTemp = " + Math.round(maxTemp));
				var windSpeed = data.wind.speed;
				writeMessage("windSpeed = " + Math.round(windSpeed));
				var sunrise = data.sys.sunrise;
				writeMessage("sunrise = " + moment.unix(sunrise).format("hh:mm:ss"));
				var sunset = data.sys.sunset;
				writeMessage("sunset = " + moment.unix(sunset).format("hh:mm:ss"));

				//var formattedTime = moment.unix(dateString).format("mm/dd/yyyy hh:mm:ss"); //04/Th/yyyy 07:04:37
				var formattedTime = moment.unix(dateString).format("MM/DD/YYYY hh:mm:ss");

				//document.write(thetime) + document.write("<br>");
				//momentDate = moment.unix(dateString).format("MM/DD/YYYY hh:mm");
				//writeMessage("dateString2 = " + momentDate);
				//localTime = momentDate().local().format("mm/dd/yyyy hh:mm:ss");
				//localTime = momentDate().format("mm/dd/yyyy hh:mm:ss");
				//var localTime = moment.unix(dateString).format("MM/DD/YYYY hh:mm");
				writeMessage("formattedTime = " + formattedTime);





/*
				msg = "Current Weather is " + currentWeather + "<br>";
				msg += "Weather for " + city + "<br>";
				msg += dateString + "<br>";
				msg += "Current temperature is " + currentTemp + "<br>";
				msg += "Today's high" + highTemp + "<br>";
				msg += "Tonight's low" + lowTemp + "<br>";
				msg += "Pressure is " + pressure + "<br>";
				writeMessage(msg);
*/

	  	});


		});
	});

</script>
